## æ¨¡æ‹Ÿ + ä¹˜æ³•åŸç†

è¿™é“é¢˜å’Œ [907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247493485&idx=1&sn=c6d6ac25c171e2617c5a95173aa58825) å¦‚å‡ºä¸€è¾™ï¼Œåªä¸è¿‡æ— é¡»è€ƒè™‘è¿ç”¨ã€Œå•è°ƒæ ˆã€ã€‚

åŸé—®é¢˜ä¸ºæ±‚æ‰€æœ‰å­æ•°ç»„çš„å”¯ä¸€å­—ç¬¦æ•°é‡å’Œï¼Œå…¶å¯ç­‰ä»·ä¸ºæ±‚æ¯ä¸ª $s[i]$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼Œå³æ¯ä¸ª $s[i]$ å¯ä½œä¸ºå¤šå°‘ä¸ªå­æ•°ç»„çš„å”¯ä¸€å…ƒç´ ã€‚

å‡å®šæˆ‘ä»¬èƒ½é¢„å¤„ç†å‡ºä¸¤æ•°ç»„ `l` å’Œ `r` åˆ†åˆ«ä»£è¡¨ $s[i]$ ä½œä¸ºå­æ•°ç»„å”¯ä¸€å­—ç¬¦æ—¶ï¼Œå…¶æ‰€èƒ½åˆ°è¾¾çš„æœ€è¿œä¸¤ç«¯ï¼š
* `l[i] = a` ä»£è¡¨ä¸‹æ ‡ $a$ ä¸º $s[i]$ èƒ½å¤Ÿä½œä¸ºå­æ•°ç»„å”¯ä¸€å­—ç¬¦æ—¶çš„æœ€è¿œå·¦è¾¹ç•Œï¼Œå³ä¸º $s[i]$ å·¦è¾¹ç¬¬ä¸€ä¸ªä¸ $s[i]$ å€¼ç›¸åŒçš„ä½ç½®ï¼ˆè‹¥ä¸å­˜åœ¨ï¼Œåˆ™ä¸º $a = -1$ï¼‰
* `r[i] = b` ä»£è¡¨è·³è¡¨ $b$ ä¸º $s[i]$ èƒ½å¤Ÿä½œä¸ºå­æ•°ç»„å”¯ä¸€å­—ç¬¦æ—¶çš„æœ€è¿œå³è¾¹ç•Œï¼Œå³ä¸º $s[i]$ å³è¾¹ç¬¬ä¸€ä¸ªä¸ $s[i]$ å€¼ç›¸åŒçš„ä½ç½®ï¼ˆè‹¥ä¸å­˜åœ¨ï¼Œåˆ™ä¸º $b = n$ï¼‰

å­æ•°ç»„å·¦ç«¯ç‚¹ä¸ªæ•°ä¸º $(i - a)$ ä¸ªï¼Œå³ç«¯ç‚¹ä¸ªæ•°ä¸º $(b - i)$ ä¸ªï¼Œæ ¹æ®ä¹˜æ³•åŸç†å¯çŸ¥ï¼Œå­æ•°ç»„ä¸ªæ•°ä¸ºä¸¤è€…ä¹˜ç§¯ã€‚

é¢„å¤„ç† `l` å’Œ `r` åªéœ€è¦ä½¿ç”¨éå†è®¡æ•°å³å¯ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    public int uniqueLetterString(String s) {
        char[] cs = s.toCharArray();
        int n = cs.length, ans = 0;
        int[] l = new int[n], r = new int[n];
        int[] cnts = new int[26];
        Arrays.fill(cnts, -1);
        for (int i = 0; i < n; i++) {
            int u = cs[i] - 'A';
            l[i] = cnts[u];
            cnts[u] = i;
        }
        Arrays.fill(cnts, n);
        for (int i = n - 1; i >= 0; i--) {
            int u = cs[i] - 'A';
            r[i] = cnts[u];
            cnts[u] = i;
        }
        for (int i = 0; i < n; i++) ans += (i - l[i]) * (r[i] - i);
        return ans;
    }
}
```

* []

```Typescript
function uniqueLetterString(s: string): number {
    let n = s.length, ans = 0
    const l = new Array<number>(n), r = new Array<number>(n)
    const cnts = new Array<number>(26).fill(-1)
    for (let i = 0; i < n; i++) {
        const u = s.charCodeAt(i) - 65
        l[i] = cnts[u]
        cnts[u] = i
    }
    cnts.fill(n)
    for (let i = n - 1; i >= 0; i--) {
        const u = s.charCodeAt(i) - 65
        r[i] = cnts[u]
        cnts[u] = i
    }
    for (let i = 0; i < n; i++) ans += (i - l[i]) * (r[i] - i)
    return ans
};
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## åŠ é¤

**åŠ é¤ä¸€é“ä¸æœ¬é¢˜ååˆ†ç±»ä¼¼ï¼ˆéœ€ç»“åˆå•è°ƒæ ˆä¸”è€ƒè™‘é‡å¤é—®é¢˜ï¼‰çš„ä¸­ç­‰é¢˜ : [907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247493485&idx=1&sn=c6d6ac25c171e2617c5a95173aa58825) ğŸ‰ğŸ‰**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~
